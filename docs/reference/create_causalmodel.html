<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create a structural causal model from a graph or a set of response functions — create_causalmodel • causaloptim</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create a structural causal model from a graph or a set of response functions — create_causalmodel"><meta name="description" content="Given either a graph or a set of response functions (i.e., either graph or respvars may be provided), and a specification of what conditional probabilities are observed, produce a causal model."><meta property="og:description" content="Given either a graph or a set of response functions (i.e., either graph or respvars may be provided), and a specification of what conditional probabilities are observed, produce a causal model."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">causaloptim</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/example-code.html">Code from examples in manuscript</a></li>
    <li><a class="dropdown-item" href="../articles/shinyapp.html">How to use the causaloptim Shiny app to analyze graphs</a></li>
    <li><a class="dropdown-item" href="../articles/vertexenum-speed.html">Improving the speed of computing causal bounds</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/sachsmc/causaloptim/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Create a structural causal model from a graph or a set of response functions</h1>
      <small class="dont-index">Source: <a href="https://github.com/sachsmc/causaloptim/blob/HEAD/R/causal-model.R" class="external-link"><code>R/causal-model.R</code></a></small>
      <div class="d-none name"><code>create_causalmodel.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Given either a graph or a set of response functions (i.e., either <code>graph</code> or <code>respvars</code> may be provided), and a specification of what conditional probabilities are observed, produce a causal model.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">create_causalmodel</span><span class="op">(</span></span>
<span>  graph <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  respvars <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">prob.form</span>,</span>
<span>  <span class="va">p.vals</span>,</span>
<span>  constraints <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  right.vars <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  redundant <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-graph">graph<a class="anchor" aria-label="anchor" href="#arg-graph"></a></dt>
<dd><p>A graph with special edge and vertex attributes, as produced by <a href="initialize_graph.html">initialize_graph</a></p></dd>


<dt id="arg-respvars">respvars<a class="anchor" aria-label="anchor" href="#arg-respvars"></a></dt>
<dd><p>List of response functions as produced by <a href="create_response_function.html">create_response_function</a></p></dd>


<dt id="arg-prob-form">prob.form<a class="anchor" aria-label="anchor" href="#arg-prob-form"></a></dt>
<dd><p>A list with two named elements "out", "cond" where each element is a character vector of variable names that appear in p.vals</p></dd>


<dt id="arg-p-vals">p.vals<a class="anchor" aria-label="anchor" href="#arg-p-vals"></a></dt>
<dd><p>Data frame defining which probabilities are observable. The variable names of p.vals must all appear in prob.form. If missing, will assume that all combinations of the variables values are observed.</p></dd>


<dt id="arg-constraints">constraints<a class="anchor" aria-label="anchor" href="#arg-constraints"></a></dt>
<dd><p>A vector of character strings that represent the constraints on counterfactual quantities</p></dd>


<dt id="arg-right-vars">right.vars<a class="anchor" aria-label="anchor" href="#arg-right-vars"></a></dt>
<dd><p>A vector of character strings indicating which variables are on the right side of the graph. Only required when graph is NULL. See examples.</p></dd>


<dt id="arg-redundant">redundant<a class="anchor" aria-label="anchor" href="#arg-redundant"></a></dt>
<dd><p>If TRUE, removes any redundant constraints before deriving the observable constraints.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>An object of class "causalmodel"</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>It is assumed that probabilities of the form p(out | cond) are observed, for each combination of values in p.vals. cond may be NULL in which case nothing is conditioned on.</p>
<p>The constraints are specified in terms of potential outcomes to constrain by writing the potential outcomes, values of their parents, and operators that determine the constraint (equalities or inequalities). For example,
<code>X(Z = 1) &gt;= X(Z = 0)</code></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span> <span class="co">## regular IV case</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">graph</span> <span class="op">&lt;-</span> <span class="fu"><a href="initialize_graph.html">initialize_graph</a></span><span class="op">(</span><span class="fu">graph_from_literal</span><span class="op">(</span><span class="va">Z</span> <span class="op">-</span><span class="op">+</span> <span class="va">X</span>, <span class="va">X</span> <span class="op">-</span><span class="op">+</span> <span class="va">Y</span>, <span class="va">Ur</span> <span class="op">-</span><span class="op">+</span> <span class="va">X</span>, <span class="va">Ur</span> <span class="op">-</span><span class="op">+</span> <span class="va">Y</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">iv_model</span> <span class="op">&lt;-</span> <span class="fu">create_causalmodel</span><span class="op">(</span><span class="va">graph</span>, prob.form <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>out <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"X"</span>, <span class="st">"Y"</span><span class="op">)</span>, cond <span class="op">=</span> <span class="st">"Z"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># with monotonicity</span></span></span>
<span class="r-in"><span><span class="va">iv_model_mono</span> <span class="op">&lt;-</span> <span class="fu">create_causalmodel</span><span class="op">(</span><span class="va">graph</span>, prob.form <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>out <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"X"</span>, <span class="st">"Y"</span><span class="op">)</span>, cond <span class="op">=</span> <span class="st">"Z"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                 constraints <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="st">"X(Z = 1) &gt;= X(Z = 0)"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>                 </span></span>
<span class="r-in"><span><span class="co">#showing the use of right.vars</span></span></span>
<span class="r-in"><span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu"><a href="initialize_graph.html">initialize_graph</a></span><span class="op">(</span><span class="fu">graph_from_literal</span><span class="op">(</span><span class="va">Ul</span> <span class="op">-</span><span class="op">+</span> <span class="va">X</span> <span class="op">-</span><span class="op">+</span> <span class="va">Y</span> <span class="op">-</span><span class="op">+</span> <span class="va">Y2</span>, <span class="va">Ur</span> <span class="op">-</span><span class="op">+</span> <span class="va">Y</span>, <span class="va">Ur</span> <span class="op">-</span><span class="op">+</span> <span class="va">Y2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">V</span><span class="op">(</span><span class="va">b</span><span class="op">)</span><span class="op">$</span><span class="va">latent</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span>, <span class="fl">0</span>, <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">respvars</span> <span class="op">&lt;-</span> <span class="fu"><a href="create_response_function.html">create_response_function</a></span><span class="op">(</span><span class="va">b</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">create_causalmodel</span><span class="op">(</span>graph <span class="op">=</span> <span class="va">b</span>, constraints <span class="op">=</span> <span class="st">"Y2(Y = 1) &gt;= Y2(Y = 0)"</span>,</span></span>
<span class="r-in"><span>                   p.vals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expand.grid.html" class="external-link">expand.grid</a></span><span class="op">(</span>X <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="fl">1</span>, Y2 <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="fl">1</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>                   prob.form <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>out <span class="op">=</span> <span class="st">"Y2"</span>, cond <span class="op">=</span> <span class="st">"X"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> This is a causal model represented by the set of response functions in the x$data$response_functions element, where it is assumed that we observe parameters (observables) of the form pa_b, which represents the probability P(Y2 = a | X = b). To sample a distribution from this model, use sample_distribution(x).</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> The observables relate to 12 unobservable variables which represent probabilities of particular response functions. The constraints are in the following equations and are available in numeric matrix form in the x$counterfactual_constraints$numeric$R element.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> q0_0 + q0_2 + q0_3 + q1_0 + q1_2 + q1_3 + q2_0 + q2_2 + q2_3 + q3_0 + q3_2 + q3_3  = 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> p0_0 = q0_0 + q0_2 + q1_0 + q2_0 + q2_2 + q3_0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> p0_1 = q0_0 + q0_2 + q1_0 + q1_2 + q2_0 + q3_0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> p1_0 = q0_3 + q1_2 + q1_3 + q2_3 + q3_2 + q3_3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> p1_1 = q0_3 + q1_3 + q2_2 + q2_3 + q3_2 + q3_3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> The causal model implies the following observable constraints in addition to the standard probabilistic constraints, which are available in numeric form in the x$observable_constraints$numeric element. To test whether these constraints are violated, use check_constraints_violated(x)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> No observable constraints other than the probabilistic constraints. To compute bounds, specify an effect of interest, and see the compute_bounds function.</span>
<span class="r-in"><span> <span class="co">## need to specify right.vars because it cannot be inferred from the response functions alone</span></span></span>
<span class="r-in"><span><span class="fu">create_causalmodel</span><span class="op">(</span>graph <span class="op">=</span> <span class="cn">NULL</span>, respvars <span class="op">=</span> <span class="va">respvars</span>, </span></span>
<span class="r-in"><span>                   constraints <span class="op">=</span> <span class="st">"Y2(Y = 1) &gt;= Y2(Y = 0)"</span>,</span></span>
<span class="r-in"><span>                   p.vals <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/expand.grid.html" class="external-link">expand.grid</a></span><span class="op">(</span>X <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="fl">1</span>, Y2 <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="fl">1</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>                   prob.form <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>out <span class="op">=</span> <span class="st">"Y2"</span>, cond <span class="op">=</span> <span class="st">"X"</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>                   right.vars <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Y"</span>, <span class="st">"Y2"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> This is a causal model represented by the set of response functions in the x$data$response_functions element, where it is assumed that we observe parameters (observables) of the form pa_b, which represents the probability P(Y2 = a | X = b). To sample a distribution from this model, use sample_distribution(x).</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> The observables relate to 12 unobservable variables which represent probabilities of particular response functions. The constraints are in the following equations and are available in numeric matrix form in the x$counterfactual_constraints$numeric$R element.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> q0_0 + q0_2 + q0_3 + q1_0 + q1_2 + q1_3 + q2_0 + q2_2 + q2_3 + q3_0 + q3_2 + q3_3  = 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> p0_0 = q0_0 + q0_2 + q1_0 + q2_0 + q2_2 + q3_0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> p0_1 = q0_0 + q0_2 + q1_0 + q1_2 + q2_0 + q3_0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> p1_0 = q0_3 + q1_2 + q1_3 + q2_3 + q3_2 + q3_3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> p1_1 = q0_3 + q1_3 + q2_2 + q2_3 + q3_2 + q3_3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> The causal model implies the following observable constraints in addition to the standard probabilistic constraints, which are available in numeric form in the x$observable_constraints$numeric element. To test whether these constraints are violated, use check_constraints_violated(x)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> No observable constraints other than the probabilistic constraints. To compute bounds, specify an effect of interest, and see the compute_bounds function.</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Michael C Sachs, Erin E Gabriel, Arvid Sjölander, Gustav Jonzon.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

