<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Create linear causal problem from causal model and effect — create_linearcausalproblem • causaloptim</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Create linear causal problem from causal model and effect — create_linearcausalproblem"><meta name="description" content="A more flexible alternative to analyze_graph that takes as inputs the
causal model and effect."><meta property="og:description" content="A more flexible alternative to analyze_graph that takes as inputs the
causal model and effect."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">causaloptim</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/example-code.html">Code from examples in manuscript</a></li>
    <li><a class="dropdown-item" href="../articles/shinyapp.html">How to use the causaloptim Shiny app to analyze graphs</a></li>
    <li><a class="dropdown-item" href="../articles/vertexenum-speed.html">Improving the speed of computing causal bounds</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/sachsmc/causaloptim/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Create linear causal problem from causal model and effect</h1>
      <small class="dont-index">Source: <a href="https://github.com/sachsmc/causaloptim/blob/HEAD/R/create-linear-causal-problem.R" class="external-link"><code>R/create-linear-causal-problem.R</code></a></small>
      <div class="d-none name"><code>create_linearcausalproblem.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>A more flexible alternative to <a href="analyze_graph.html">analyze_graph</a> that takes as inputs the
causal model and effect.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">create_linearcausalproblem</span><span class="op">(</span><span class="va">causal_model</span>, <span class="va">effectt</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-causal-model">causal_model<a class="anchor" aria-label="anchor" href="#arg-causal-model"></a></dt>
<dd><p>An object of class "causalmodel" as produce by <a href="create_causalmodel.html">create_causalmodel</a></p></dd>


<dt id="arg-effectt">effectt<a class="anchor" aria-label="anchor" href="#arg-effectt"></a></dt>
<dd><p>A character string that represents the causal effect of interest</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A an object of class "linearcausalproblem", which is a list with the
  following components. This list can be passed to <a href="optimize_effect_2.html">optimize_effect_2</a>
  which interfaces with the symbolic optimization program. Print and plot methods are also
  available.</p><dl><dt>variables</dt>
<dd><p>Character vector of variable names
  of potential outcomes, these start with 'q' to match Balke's notation</p></dd>

  <dt>parameters</dt>
<dd><p>Character vector of parameter names of observed
  probabilities, these start with 'p' to match Balke's notation</p></dd>

  <dt>constraints</dt>
<dd><p>Character vector of parsed constraints</p></dd>

  <dt>objective</dt>
<dd><p>Character string defining the objective to be optimized in
  terms of the variables</p></dd>

  <dt>p.vals</dt>
<dd><p>Matrix of all possible values of the
  observed data vector, corresponding to the list of parameters.</p></dd>

  <dt>q.vals</dt>
<dd><p>Matrix of all possible values of the response function form
  of the potential outcomes, corresponding to the list of variables.</p></dd>

  <dt>parsed.query</dt>
<dd><p>A nested list containing information on the parsed
  causal query.</p></dd>

  <dt>objective.nonreduced</dt>
<dd><p>The objective in terms of the
  original variables, before algebraic variable reduction. The nonreduced
  variables can be obtained by concatenating the columns of q.vals.</p></dd>

  <dt>response.functions</dt>
<dd><p>List of response functions.</p></dd>

  <dt>graph</dt>
<dd><p>The graph as passed to the function.</p></dd>

  <dt>R</dt>
<dd><p>A matrix with coefficients
  relating the p.vals to the q.vals p = R * q</p></dd>

  <dt>c0</dt>
<dd><p>A vector of coefficients relating the q.vals to the
  objective function theta = c0 * q</p></dd>

  <dt>iqR</dt>
<dd><p>A matrix with coefficients to represent the inequality
  constraints</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The effectt parameter describes your causal effect of interest. The effectt parameter must be of the form</p>
<p><code>p{V11(X=a)=a; V12(X=a)=b;...} op1 p{V21(X=b)=a; V22(X=c)=b;...} op2 ...</code></p>
<p>where Vij are names of variables in the graph, a, b are numeric values from 0:(nvals - 1), and op are either - or +. You can specify a single probability statement (i.e., no operator). Note that the probability statements begin with little p, and use curly braces, and items inside the probability statements are separated by ;. The variables may be potential outcomes which are denoted by parentheses. Variables may also be nested inside potential outcomes. Pure observations such as <code>p{Y = 1}</code> are not allowed if the left side contains any variables.
There are 2 important rules to follow: 1) Only variables on the right side can be in the probability events, and if the left side is not empty: 2) none of the variables in the left side that are intervened upon can have any children in the left side, and all paths from the left to the right must be blocked by the intervention set. Here the intervention set is anything that is inside the smooth brackets (i.e., variable set to values).</p>
<p>All of the following are valid effect statements:</p>
<p><code>p{Y(X = 1) = 1} - p{Y(X = 0) = 1}</code></p>
<p><code>p{X(Z = 1) = 1; X(Z = 0) = 0}</code></p>
<p><code>p{Y(M(X = 0), X = 1) = 1} - p{Y(M(X = 0), X = 0) = 1}</code></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">### confounded exposure and outcome</span></span></span>
<span class="r-in"><span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu"><a href="initialize_graph.html">initialize_graph</a></span><span class="op">(</span><span class="fu">igraph</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/igraph/man/graph_from_literal.html" class="external-link">graph_from_literal</a></span><span class="op">(</span><span class="va">X</span> <span class="op">-</span><span class="op">+</span> <span class="va">Y</span>, <span class="va">Ur</span> <span class="op">-</span><span class="op">+</span> <span class="va">X</span>, <span class="va">Ur</span> <span class="op">-</span><span class="op">+</span> <span class="va">Y</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">confmod</span> <span class="op">&lt;-</span> <span class="fu"><a href="create_causalmodel.html">create_causalmodel</a></span><span class="op">(</span>graph <span class="op">=</span> <span class="va">b</span>, prob.form <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>out <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"X"</span>, <span class="st">"Y"</span><span class="op">)</span>, cond <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">create_linearcausalproblem</span><span class="op">(</span><span class="va">confmod</span>, effectt <span class="op">=</span> <span class="st">"p{Y(X = 1) = 1}"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Ready to compute bounds for the effect p{Y(X = 1) = 1} </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  Under the assumption encoded in the graph: + 3/3 edges from 7c72e00 (vertex names):</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] X -&gt;Y Ur-&gt;X Ur-&gt;Y</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Number of possible values of each variable: </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  X: 2, Y: 2 </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> No constraints have been specified </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  The bounds will be reported in terms of parameters of the form pab_, which represents the probability P(X = a, Y = b). </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Additional information is available in the following list elements: [1] "variables"            "parameters"           "constraints"         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [4] "objective"            "p.vals"               "q.vals"              </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7] "parsed.query"         "unparsed.query"       "user.constraints"    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [10] "objective.nonreduced" "response.functions"   "graph"               </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [13] "R"                    "c0"                   "causal_model"        </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Michael C Sachs, Erin E Gabriel, Arvid Sjölander, Gustav Jonzon.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

